var YoutubePlayer=function(){var t,e,n,o=this;this.init=function(){this.initScript(),this.bindEvents()},this.initScript=function(){var t=document.createElement("script");t.src="//www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)},this.bindEvents=function(){$(document).keydown(function(t){if(32==t.which&&!$("#search-wrap").hasClass("is-active"))return pubsub.emit("SPACE"),!1}),pubsub.on("SPACE",function(e){1==t.getPlayerState()?o.pause():o.play()}),$(document).keyup(function(t){39==t.keyCode&&pubsub.emit("NEXT"),37==t.keyCode&&pubsub.emit("PREV")}),$("#player").find(".play").on("click",function(){o.play()}),$("#player").find(".pause").on("click",function(){o.pause()}),$("#player").find(".backward").on("click",function(){pubsub.emit("PREV")}),$("#player").find(".forward").on("click",function(){pubsub.emit("NEXT")}),$(".mute").on("click",function(){0==t.getVolume()?($(this).children("i").removeClass("fa-volume-off").addClass("fa-volume-up"),t.setVolume(100)):($(this).children("i").removeClass("fa-volume-up").addClass("fa-volume-off"),t.setVolume(0))})},this.initPlayer=function(e){e,t=new YT.Player(e,{height:$("#"+e).height(),width:$("#"+e).width(),videoId:"",events:{onReady:o.onPlayerReady,onStateChange:o.onPlayerStateChange,onError:o.onPlayerError},playerVars:{controls:"0",rel:"0",showinfo:"0",modestbranding:"0",iv_load_policy:"3",cc_load_policy:"0"}})},this.onPlayerReady=function(t){pubsub.emit("PLAYER_READY")},this.onPlayerStateChange=function(a){switch(a.data){case-1:$("body").addClass("loading");break;case 0:clearInterval(e),pubsub.emit("NEXT");break;case 1:n=t.getDuration(),e=setInterval(o.update,250),$("body").removeClass("loading");break;case 2:clearInterval(e);break;case 3:$("body").addClass("loading")}},this.onPlayerError=function(t){pubsub.emit("NEXT")},this.update=function(){var e=secondsToHms(t.getCurrentTime());$(".track.is-playing").find(".time").html('<span class="seconds">'+e+'</span> <span class="duration">'+secondsToHms(n)+"</span>");t.getVideoLoadedFraction();var o=t.getCurrentTime()/n;$(".track.is-playing").width();$(".track.is-playing").find(".scrubber").css({width:100*o+"%"}),o},this.loadVideoByUrl=function(e){t.loadVideoByUrl(e)},this.loadVideoById=function(e){t.loadVideoById(e)},this.play=function(){t.playVideo()},this.stop=function(){t.stopVideo()},this.pause=function(){t.pauseVideo()},this.setVolume=function(e){t.setVolume(e)},this.currentItem=function(e){$(e).index(),$("body").on("click",".track_seek",function(e){var n=(void 0===e.offsetX?e.originalEvent.layerX:e.offsetX)/$(this).width()*100,o=t.getDuration()*n/100;t.seekTo(o,!0)})}};function onYouTubeIframeAPIReady(){pubsub.emit("PLAYER_API_READY")}function secondsToHms(t){t=Number(t);var e=Math.floor(t/3600),n=Math.floor(t%3600/60),o=Math.floor(t%3600%60);return(e>0?e+":"+(n<10?"0":""):"")+n+":"+(o<10?"0":"")+o}function inherits(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,n,o,a){return jQuery.easing[jQuery.easing.def](t,e,n,o,a)},easeInQuad:function(t,e,n,o,a){return o*(e/=a)*e+n},easeOutQuad:function(t,e,n,o,a){return-o*(e/=a)*(e-2)+n},easeInOutQuad:function(t,e,n,o,a){return(e/=a/2)<1?o/2*e*e+n:-o/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,o,a){return o*(e/=a)*e*e+n},easeOutCubic:function(t,e,n,o,a){return o*((e=e/a-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,o,a){return(e/=a/2)<1?o/2*e*e*e+n:o/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,o,a){return o*(e/=a)*e*e*e+n},easeOutQuart:function(t,e,n,o,a){return-o*((e=e/a-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,o,a){return(e/=a/2)<1?o/2*e*e*e*e+n:-o/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,o,a){return o*(e/=a)*e*e*e*e+n},easeOutQuint:function(t,e,n,o,a){return o*((e=e/a-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,o,a){return(e/=a/2)<1?o/2*e*e*e*e*e+n:o/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,o,a){return-o*Math.cos(e/a*(Math.PI/2))+o+n},easeOutSine:function(t,e,n,o,a){return o*Math.sin(e/a*(Math.PI/2))+n},easeInOutSine:function(t,e,n,o,a){return-o/2*(Math.cos(Math.PI*e/a)-1)+n},easeInExpo:function(t,e,n,o,a){return 0==e?n:o*Math.pow(2,10*(e/a-1))+n},easeOutExpo:function(t,e,n,o,a){return e==a?n+o:o*(1-Math.pow(2,-10*e/a))+n},easeInOutExpo:function(t,e,n,o,a){return 0==e?n:e==a?n+o:(e/=a/2)<1?o/2*Math.pow(2,10*(e-1))+n:o/2*(2-Math.pow(2,-10*--e))+n},easeInCirc:function(t,e,n,o,a){return-o*(Math.sqrt(1-(e/=a)*e)-1)+n},easeOutCirc:function(t,e,n,o,a){return o*Math.sqrt(1-(e=e/a-1)*e)+n},easeInOutCirc:function(t,e,n,o,a){return(e/=a/2)<1?-o/2*(Math.sqrt(1-e*e)-1)+n:o/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,o,a){var i=1.70158,r=0,s=o;if(0==e)return n;if(1==(e/=a))return n+o;if(r||(r=.3*a),s<Math.abs(o)){s=o;i=r/4}else i=r/(2*Math.PI)*Math.asin(o/s);return-s*Math.pow(2,10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)+n},easeOutElastic:function(t,e,n,o,a){var i=1.70158,r=0,s=o;if(0==e)return n;if(1==(e/=a))return n+o;if(r||(r=.3*a),s<Math.abs(o)){s=o;i=r/4}else i=r/(2*Math.PI)*Math.asin(o/s);return s*Math.pow(2,-10*e)*Math.sin((e*a-i)*(2*Math.PI)/r)+o+n},easeInOutElastic:function(t,e,n,o,a){var i=1.70158,r=0,s=o;if(0==e)return n;if(2==(e/=a/2))return n+o;if(r||(r=a*(.3*1.5)),s<Math.abs(o)){s=o;i=r/4}else i=r/(2*Math.PI)*Math.asin(o/s);return e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)*-.5+n:s*Math.pow(2,-10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)*.5+o+n},easeInBack:function(t,e,n,o,a,i){return null==i&&(i=1.70158),o*(e/=a)*e*((i+1)*e-i)+n},easeOutBack:function(t,e,n,o,a,i){return null==i&&(i=1.70158),o*((e=e/a-1)*e*((i+1)*e+i)+1)+n},easeInOutBack:function(t,e,n,o,a,i){return null==i&&(i=1.70158),(e/=a/2)<1?o/2*(e*e*((1+(i*=1.525))*e-i))+n:o/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+n},easeInBounce:function(t,e,n,o,a){return o-jQuery.easing.easeOutBounce(t,a-e,0,o,a)+n},easeOutBounce:function(t,e,n,o,a){return(e/=a)<1/2.75?o*(7.5625*e*e)+n:e<2/2.75?o*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?o*(7.5625*(e-=2.25/2.75)*e+.9375)+n:o*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,o,a){return e<a/2?.5*jQuery.easing.easeInBounce(t,2*e,0,o,a)+n:.5*jQuery.easing.easeOutBounce(t,2*e-a,0,o,a)+.5*o+n}}),function(t){"use strict";"object"==typeof module&&"object"==typeof module.exports?t(require("jquery"),window,document):t(jQuery,window,document)}(function(t,e,n,o){"use strict";if(!e.history.pushState)return t.fn.smoothState=function(){return this},void(t.fn.smoothState.options={});if(!t.fn.smoothState){var a=t("html, body"),i=e.console,r={isExternal:function(t){var n=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof n[1]&&n[1].length>0&&n[1].toLowerCase()!==e.location.protocol||"string"==typeof n[2]&&n[2].length>0&&n[2].replace(new RegExp(":("+{"http:":80,"https:":443}[e.location.protocol]+")?$"),"")!==e.location.host},stripHash:function(t){return t.replace(/#.*/,"")},isHash:function(t,n){n=n||e.location.href;var o=t.indexOf("#")>-1,a=r.stripHash(t)===r.stripHash(n);return o&&a},translate:function(e){var n={dataType:"html",type:"GET"};return"string"==typeof e?t.extend({},n,{url:e}):t.extend({},n,e)},shouldLoadAnchor:function(t,e,n){var a=t.prop("href");return!(r.isExternal(a)||r.isHash(a)||t.is(e)||t.prop("target")||typeof n!==o&&""!==n&&-1===t.prop("href").search(n))},clearIfOverCapacity:function(t,e){return Object.keys||(Object.keys=function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),Object.keys(t).length>e&&(t={}),t},storePageIn:function(e,n,o,a,i,r){var s=t("<html></html>").append(t(o));return void 0===i&&(i={}),void 0===r&&(r=n),e[n]={status:"loaded",title:s.find("title").first().text(),html:s.find("#"+a),doc:o,state:i,destUrl:r},e},triggerAllAnimationEndEvent:function(e,n){n=" "+n||"";var o=0;e.on("animationstart webkitAnimationStart oanimationstart MSAnimationStart",function(n){t(n.delegateTarget).is(e)&&(n.stopPropagation(),o++)}),e.on("animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(n){t(n.delegateTarget).is(e)&&(n.stopPropagation(),0==--o&&e.trigger("allanimationend"))}),e.on("allanimationend"+n,function(){o=0,r.redraw(e)})},redraw:function(t){t.height()}},s=function(s,u){var c,l=t(s),h=l.prop("id"),f=null,d=!1,p={},m={},g=e.location.href,v=function(t){(t=t||!1)&&p.hasOwnProperty(t)?delete p[t]:p={},l.data("smoothState").cache=p},y=function(e,n){n=n||t.noop;var o=r.translate(e);if(!(p=r.clearIfOverCapacity(p,u.cacheLength)).hasOwnProperty(o.url)||void 0!==o.data){p[o.url]={status:"fetching"};var a=t.ajax(o);a.done(function(t){r.storePageIn(p,o.url,t,h),l.data("smoothState").cache=p}),a.fail(function(){p[o.url].status="error"}),u.locationHeader&&a.always(function(t,e,n){var a=(t.statusCode?t:n).getResponseHeader(u.locationHeader);a&&(p[o.url].destUrl=a)}),n&&a.always(n)}},b=function(o){var r="#"+h,s=p[o]?t(p[o].html.html()):null;s.length?(n.title=p[o].title,l.data("smoothState").href=o,u.loadingClass&&a.removeClass(u.loadingClass),u.onReady.render(l,s),l.one("ss.onReadyEnd",function(){d=!1,u.onAfter(l,s),u.scroll&&function(){if(f){var e=t(f,l);if(e.length){var n=e.offset().top;a.scrollTop(n)}f=null}}(),I(l)}),e.setTimeout(function(){l.trigger("ss.onReadyEnd")},u.onReady.duration)):!s&&u.debug&&i?i.warn("No element with an id of "+r+" in response from "+o+" in "+p):e.location=o},w=function(t,n,o){var s=r.translate(t);void 0===n&&(n=!0),void 0===o&&(o=!0);var c=!1,f=!1,d={loaded:function(){var t=c?"ss.onProgressEnd":"ss.onStartEnd";if(f&&c?f&&b(s.url):l.one(t,function(){b(s.url),o||v(s.url)}),n){var a=p[s.url].destUrl;m=u.alterChangeState({id:h},p[s.url].title,a),p[s.url].state=m,e.history.pushState(m,p[s.url].title,a)}f&&!o&&v(s.url)},fetching:function(){c||(c=!0,l.one("ss.onStartEnd",function(){u.loadingClass&&a.addClass(u.loadingClass),u.onProgress.render(l),e.setTimeout(function(){l.trigger("ss.onProgressEnd"),f=!0},u.onProgress.duration)})),e.setTimeout(function(){p.hasOwnProperty(s.url)&&d[p[s.url].status]()},10)},error:function(){u.debug&&i?i.log("There was an error loading: "+s.url):e.location=s.url}};p.hasOwnProperty(s.url)||y(s),u.onStart.render(l),e.setTimeout(function(){u.scroll&&a.scrollTop(0),l.trigger("ss.onStartEnd")},u.onStart.duration),d[p[s.url].status]()},C=function(e){var n,o=t(e.currentTarget);r.shouldLoadAnchor(o,u.blacklist,u.hrefRegex)&&!d&&(e.stopPropagation(),n=r.translate(o.prop("href")),n=u.alterRequest(n),y(n))},$=function(e){var n=t(e.currentTarget);if(!e.metaKey&&!e.ctrlKey&&r.shouldLoadAnchor(n,u.blacklist,u.hrefRegex)&&(e.stopPropagation(),e.preventDefault(),!k())){S();var o=r.translate(n.prop("href"));d=!0,f=n.prop("hash"),o=u.alterRequest(o),u.onBefore(n,l),w(o)}},P=function(e){var n=t(e.currentTarget);if(!n.is(u.blacklist)&&(e.preventDefault(),e.stopPropagation(),!k())){S();var a={url:n.prop("action"),data:n.serialize(),type:n.prop("method")};d=!0,"get"===(a=u.alterRequest(a)).type.toLowerCase()&&(a.url=a.url+"?"+a.data),u.onBefore(n,l),w(a,o,u.allowFormCaching)}},E=0,k=function(){var t=null===u.repeatDelay,e=parseInt(Date.now())>E;return!(t||e)},S=function(){E=parseInt(Date.now())+parseInt(u.repeatDelay)},I=function(t){u.anchors&&u.prefetch&&t.find(u.anchors).not(u.prefetchBlacklist).on(u.prefetchOn,null,C)};return u=t.extend({},t.fn.smoothState.options,u),null===e.history.state?(m=u.alterChangeState({id:h},n.title,g),e.history.replaceState(m,n.title,g)):m={},r.storePageIn(p,g,n.documentElement.outerHTML,h,m),r.triggerAllAnimationEndEvent(l,"ss.onStartEnd ss.onProgressEnd ss.onEndEnd"),c=l,u.anchors&&(c.on("click",u.anchors,$),I(c)),u.forms&&c.on("submit",u.forms,P),{href:g,cache:p,clear:v,load:w,fetch:y,restartCSSAnimations:function(){var t=l.prop("class");l.removeClass(t),r.redraw(l),l.addClass(t)}}};e.onpopstate=function(n){if(null!==n.state){var o=e.location.href,a=t("#"+n.state.id).data("smoothState"),i=a.href!==o&&!r.isHash(o,a.href),s=n.state!==a.cache[a.href].state;(i||s)&&(s&&a.clear(a.href),a.load(o,!1))}},t.smoothStateUtility=r,t.fn.smoothState=function(e){return this.each(function(){var n=this.tagName.toLowerCase();this.id&&"body"!==n&&"html"!==n&&!t.data(this,"smoothState")?t.data(this,"smoothState",new s(this,e)):!this.id&&i?i.warn("Every smoothState container needs an id but the following one does not have one:",this):"body"!==n&&"html"!==n||!i||i.warn("The smoothstate container cannot be the "+this.tagName+" tag")})},t.fn.smoothState.options={debug:!1,anchors:"a",hrefRegex:"",forms:"form",allowFormCaching:!1,repeatDelay:500,blacklist:".no-smoothState",prefetch:!1,prefetchOn:"mouseover touchstart",prefetchBlacklist:".no-prefetch",locationHeader:"X-SmoothState-Location",cacheLength:0,loadingClass:"is-loading",scroll:!0,alterRequest:function(t){return t},alterChangeState:function(t,e,n){return t},onBefore:function(t,e){},onStart:{duration:0,render:function(t){}},onProgress:{duration:0,render:function(t){}},onReady:{duration:0,render:function(t,e){t.html(e)}},onAfter:function(t,e){}}}});var pubsub={events:{},on:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},off:function(t,e){if(this.events[t])for(var n=0;n<this.events[t].length;n++)if(this.events[t][n]===e){this.events[t].splice(n,1);break}},emit:function(t,e){this.events[t]&&this.events[t].forEach(function(t){t(e)})}};!function(t){"use strict";setTimeout(function(){t("body").removeClass("loading")},1e3)}(jQuery);var contribController=function(){$(".contrib--form").on("submit",function(t){t.preventDefault();var e=$(this).parents(".item-body").children(".mix"),n=$(this).find("input[type=text]"),o=$(this).attr("action"),a=$(this).serialize();$("body").addClass("loading"),$.ajax({method:"POST",url:o,data:a}).done(function(t){1==t.status&&(e.append(t.html),n.val(""),pubsub.emit("CONTRIB_NEW")),$("body").removeClass("loading")})})}();function createAudioMeter(t,e,n,o){var a=t.createScriptProcessor(512);return a.onaudioprocess=volumeAudioProcess,a.clipping=!1,a.lastClip=0,a.volume=0,a.clipLevel=e||.98,a.averaging=n||.95,a.clipLag=o||750,a.connect(t.destination),a.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},a.shutdown=function(){this.disconnect(),this.onaudioprocess=null},a}function volumeAudioProcess(t){for(var e,n=t.inputBuffer.getChannelData(0),o=n.length,a=0,i=0;i<o;i++)e=n[i],Math.abs(e)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),a+=e*e;var r=Math.sqrt(a/o);this.volume=Math.max(r,this.volume*this.averaging)}var micController=function(){var t=null,e=null,n=null;function o(){}function a(o){n=t.createMediaStreamSource(o),e=createAudioMeter(t),n.connect(e),i()}function i(t){$(".theme.active").find(".deco").css({transform:"translate(-50%, -50%) scale("+(.7+e.volume)+", "+(.7+e.volume)+")"}),window.requestAnimationFrame(i)}return function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,t=new AudioContext;try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},a,o)}catch(t){}}(),{volume:function(){return e.volume}}}(),mobileController=function(){$("html").on("click",".burger",function(){$(this).toggleClass("is-active"),$(this).hasClass("is-active")?($(".nav").show(),$("header").addClass("is-active")):($(".nav").hide(),$("header").removeClass("is-active"))}),$(".touchevents nav a").on("click",function(){$(".burger").click()})}(),playerController=function(){var t=[],e=0;function n(){_YoutubePlayer.loadVideoById(t[e]),$(".track").removeClass("is-playing"),$(".theme.active").find(".track").eq(e).addClass("is-playing"),function t(e){document.title=e,setTimeout(function(){t(e.substr(1)+e.substr(0,1))},400)}("MONOMIX ▶ "+$(".theme.active").find(".track").eq(e).find("h3").text().trim())}_YoutubePlayer=new YoutubePlayer,_YoutubePlayer.init(),pubsub.on("PLAYER_API_READY",function(t){_YoutubePlayer.initPlayer("player")}),pubsub.on("PLAYER_READY",function(t){}),pubsub.on("PLAYLIST_RESULT",function(t){}),pubsub.on("PREV",function(o){e-1>=0?e--:e=t.length-1,n()}),pubsub.on("NEXT",function(o){e+1<t.length?e++:e=0,n()}),pubsub.on("CONTRIB_NEW",function(e){t=[],$(".theme.active").find(".track").each(function(e,n){var o=$(this).data("video_id");t.push(o)})}),$("html").on("click",".theme",function(n){n.stopPropagation(),$(".theme").removeClass("active"),$(this).addClass("active");var o=$(this).find("h2").text();t=[],e=0,$(this).find(".track").each(function(e,n){var a=$(this).data("video_id");t.push(a),history.pushState({},"THEME : "+o,"/theme/"+o.toLowerCase())})}),$("html").on("click",".track:not(.is-playing)",function(t){t.stopPropagation(),e=$(this).index(),n()}),$("html").on("click",".track.is-playing",function(t){t.stopPropagation(),$(this).toggleClass("is-pause"),pubsub.emit("SPACE")})}(),searchController=function(){$("html").on("click","#search-wrap button[type=submit]",function(t){t.preventDefault(),$("label").click()}),$("html").on("click","#close",function(t){$("#search-wrap").removeClass("is-active")}),$("html").on("click","#search-wrap .layer",function(t){$("#search-wrap").removeClass("is-active")}),$(document).keydown(function(t){27==t.which&&$("#search-wrap").removeClass("is-active")}),$("html").on("click","#search-wrap label",function(){$(this).parents("#search-wrap").toggleClass("is-active"),$(this).parents("#search-wrap").hasClass("is-active")&&setTimeout(function(){$("input[name='s']").focus()},400)}),$(document).on("keyup","#s",function(t){t.stopPropagation();var e=this.value;this.value.length>3&&($("body").addClass("loading"),$.ajax({method:"GET",url:"/s/"+e}).done(function(t){$(".themes").html($(".themes",t).html()),history.pushState({},"SEARCHING : "+e,"/s/"+e),$("body").removeClass("loading")}))})}();